<!DOCTYPE html>
<!-- last program edit 13 March 2022 -->
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>The Marley Fields Woddle</title>
<meta name="description" content="blah blah blah">

<style type="text/css">
<!--
* {
    font-family: Arial, Helvetica, sans-serif;
    margin: 5px 0px 0px 0px;
    padding: 0;
}
.wrapper {
    display:grid;
}
.wrapper > div {
    margin: auto;
    border: 1px solid #008B8B;
    padding: 10px 10px 10px 10px;
    background: #F0FFF0;
}
input[type=text] {
    width: 42px;
    height:32px;
    text-align: center;
    border: 2px solid #ccc;
    border-radius: 4px;
    font-size: 20px;
    background-color: white;
    padding: 1px 1px 1px 1px;
    margin: 1px 1px 2px 1px;
    display: inline-block;
}
h3 {
    color: #008B8B; /* green */
}
.p2 {
    color: #008B8B; /* green */
}
.p3 {
    font-size: 14px;
    font-style: italic;
    color: #a3a375; /* grey */
}
.p4 {
    font-size: 14px;
    color: #008B8B; /* green */
}
.buttonclass1 {
    width: 80px;
    height:30px;
    margin:1px 40px 1px 1px;
    display: inline-block;
}
.hintlabel {
    width:80px;
    height:25px;
    text-align: center;
    padding: 1px 1px 1px 1px;
    display:inline-block
}
body {
        background: #d5f0d5;
}
-->
</style>

</head>
<body>

<noscript>
  <h2>enable JavaScript for this to work</h2>
</noscript>
<div class="wrapper">
  <div>
    <h3>The Marley Fields Woddle  -  13 Mar 2022</h3> <!-- change date here -->
    <p class="p2">only one rule > enter valid words</p>
    <form  name="theForm">
    <input type="text" id="a1" name="a1" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="a2" name="a2" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="a3" name="a3" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="a4" name="a4" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="a5" name="a5" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <br>
    <input type="text" id="b1" name="b1" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="b2" name="b2" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="b3" name="b3" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="b4" name="b4" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="b5" name="b5" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <br>
    <input type="text" id="c1" name="c1" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="c2" name="c2" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="c3" name="c3" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="c4" name="c4" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="c5" name="c5" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <br>
    <input type="text" id="d1" name="d1" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="d2" name="d2" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="d3" name="d3" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="d4" name="d4" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="d5" name="d5" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <br>
    <input type="text" id="e1" name="e1" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="e2" name="e2" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="e3" name="e3" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="e4" name="e4" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="e5" name="e5" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <br>
    <input type="text" id="f1" name="f1" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="f2" name="f2" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="f3" name="f3" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="f4" name="f4" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="f5" name="f5" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <br>
    <input type="text" id="g1" name="g1" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="g2" name="g2" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="g3" name="g3" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="g4" name="g4" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="g5" name="g5" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <br>
    <input type="text" id="h1" name="h1" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="h2" name="h2" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="h3" name="h3" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="h4" name="h4" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="h5" name="h5" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <br>
    <input type="text" id="i1" name="i1" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="i2" name="i2" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="i3" name="i3" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="i4" name="i4" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="i5" name="i5" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <br>
    <input type="text" id="j1" name="j1" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="j2" name="j2" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="j3" name="j3" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="j4" name="j4" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <input type="text" id="j5" name="j5" maxlength="1" size="1" onfocusout="fOut(this.id);">
    <br><br>

    <input type="button" class="buttonclass1" value="colour me" onClick="colourMeButton()" >
    <input type="button" class="buttonclass1" value="clear cells" onClick="clearMeButton()" >
    <label id="hint">&nbsp;</label>
    <br><br>
    <input type="radio" id="easy" name="choice" value="easy" checked>
    <label for="easy" class="p2">easy</label><br>
    <input type="radio" id="difficult" name="choice" value="difficult">
    <label for="difficult" class="p2">difficult - the word is reversed</label>
    <br>
    <p class="p4">Mon&nbsp;Tue&nbsp;Wed&nbsp;Thu&nbsp;Fri&nbsp;Sat&nbsp;Sun</p>
    <input type="radio" id="word1" name="theword" value="badge" checked>  <!-- change words here -->
    <input type="radio" id="word2" name="theword" value="local" >
    <input type="radio" id="word3" name="theword" value="magna" >
    <input type="radio" id="word4" name="theword" value="prism" >
    <input type="radio" id="word5" name="theword" value="quilt" >
    <input type="radio" id="word6" name="theword" value="joker" >
    <input type="radio" id="word7" name="theword" value="fauna" >
    <label for="theword" class="p2">select word</label>
    <br>
    <p class="p3">version 10.2&nbsp;&nbsp;&nbsp;&nbsp;Mar 2022</p>
    </form>
    <br>
  </div>
</div>

<script type="text/javascript">

function fOut(id) {
    let x = document.getElementById(id).value.trim();
    if (x == "") { // clears space from input cell
        document.getElementById(id).value = "";
        document.getElementById(id).style.background = "#FFFFFF"; // white
    }
    if (!x.match(/^[a-zA-Z]*$/)) { // clears cell if not a-z or A-Z
        document.getElementById(id).value = "";
        document.getElementById(id).style.background = "#FFFFFF"; // white
    }
}

function clearAllFunction(a, b, c, d, e) {
    let docArray = [a, b, c, d, e]; // for document IDs
    for (let i = 0; i < 5; i++) {
        document.getElementById(docArray[i]).value = "";
        document.getElementById(docArray[i]).style.background = "#FFFFFF"; // white
    }
    document.getElementById("hint").innerHTML = "&nbsp;";
    document.getElementById("hint").style.background = "#F0FFF0"; // pale green
}

function clearMeButton() {
    // list input IDs for clearing
    clearAllFunction("a1", "a2", "a3", "a4", "a5");
    clearAllFunction("b1", "b2", "b3", "b4", "b5");
    clearAllFunction("c1", "c2", "c3", "c4", "c5");
    clearAllFunction("d1", "d2", "d3", "d4", "d5");
    clearAllFunction("e1", "e2", "e3", "e4", "e5");
    clearAllFunction("f1", "f2", "f3", "f4", "f5");
    clearAllFunction("g1", "g2", "g3", "g4", "g5");
    clearAllFunction("h1", "h2", "h3", "h4", "h5");
    clearAllFunction("i1", "i2", "i3", "i4", "i5");
    clearAllFunction("j1", "j2", "j3", "j4", "j5");
}

function colourMeButton() {
    // list input IDs for colouring
    eachLineFunction("a1", "a2", "a3", "a4", "a5");
    eachLineFunction("b1", "b2", "b3", "b4", "b5");
    eachLineFunction("c1", "c2", "c3", "c4", "c5");
    eachLineFunction("d1", "d2", "d3", "d4", "d5");
    eachLineFunction("e1", "e2", "e3", "e4", "e5");
    eachLineFunction("f1", "f2", "f3", "f4", "f5");
    eachLineFunction("g1", "g2", "g3", "g4", "g5");
    eachLineFunction("h1", "h2", "h3", "h4", "h5");
    eachLineFunction("i1", "i2", "i3", "i4", "i5");
    eachLineFunction("j1", "j2", "j3", "j4", "j5");
}

function fetchDataFunction(a, b, c, d, e) {
    // read input fields
    let fa = document.getElementById(a).value.trim().toLowerCase();
    let fb = document.getElementById(b).value.trim().toLowerCase();
    let fc = document.getElementById(c).value.trim().toLowerCase();
    let fd = document.getElementById(d).value.trim().toLowerCase();
    let fe = document.getElementById(e).value.trim().toLowerCase();
    let fetchedArray = [fa, fb, fc, fd, fe];
    return fetchedArray;
}

function eachLineFunction(a, b, c, d, e) {
    // colouring function
    let radioButtons = document.querySelectorAll('input[name="theword"]');
    let word;
    for (let radioButton of radioButtons) {
        if (radioButton.checked) {
            word = radioButton.value;
            break;
            }
    }
    // console.log(word);
    if (word.length != 5 ) {
        alert("Stored word is not 5 letters long!!");
    }
    if (!word.match(/^[a-zA-Z]*$/)) {
        alert("Stored word is not valid! No spaces or numbers please.");
    }
    let word2 = word.trim().toLowerCase();

    let docArray = [a, b, c, d, e]; // for document IDs
    let colourArray = ["b", "b", "b", "b", "b"]; // baseline colour
    let lineArray = ["", "", "", "", "", "", ""];
    let maskArray = ["", "", "", "", "",];
    lineArray = fetchDataFunction(a, b, c, d, e);

    if(document.getElementById("difficult").checked) {  // if difficult checked reverse string
        word2 = word2.split("").reverse().join("");
    }

    let myWordArray = Array.from(word2); // create array of string

    let tempMyWordArray = []; // copy word array with push loop
    for (let i of myWordArray) {
        tempMyWordArray.push(i);
    }

    let emptyCell = false; // checks for empty cells
    for (let i = 0; i < 5; i++) {
        if (lineArray[i] == "") {
           emptyCell = true;
        }
    }

    if (emptyCell == true) { // if empty cells colour white else run code
        for (let i = 0; i < 5; i++) {
            document.getElementById(docArray[i]).style.background = "#FFFFFF"; // white
        }
    } else {
        // entered cells are valid so run check
        // matching letter and position
        for (let i = 0; i < 5; i++) {
            if (lineArray[i] == myWordArray[i]) {
                tempMyWordArray[i] = "-";
                maskArray[i] = "g";
                colourArray[i] = "g";
            }
        }

        // console.log(myWordArray);
        // console.log(maskArray);
        // console.log(lineArray);
        // console.log(tempMyWordArray);

        // set misplaced letters and unused letter colours using maskArray
        for (let i = 0; i < 5; i++) {
            for (let j = 0; j < 5; j++) {
                if (lineArray[i] == tempMyWordArray[j] && maskArray[j] != "o" && maskArray[i] != "g") {
                    maskArray[j] = "o";
                    colourArray[i] = "o";
                    break;
                }
            }
        }

        // console.log(maskArray);
        // console.log(colourArray);

        // set background colours by comparing cell position and colourArray
        for (let i = 0; i < colourArray.length; i++) {
            if (colourArray[i] == "g") {
                document.getElementById(docArray[i]).style.background = "#00FF00"; // green
            } else if (colourArray[i] == "o") {
                document.getElementById(docArray[i]).style.background = "#FFA500"; // orange
            } else if (colourArray[i] == "b") {
                document.getElementById(docArray[i]).style.background = "#C0C0C0"; // grey
            } else if (colourArray[i] == "") {
                document.getElementById(docArray[i]).style.background = "#FFFFFF"; // white
            }
        }
        let hintCounter = 0;
        for (let i = 0; i < colourArray.length; i++) {
            if (colourArray[i] == "g") {
                hintCounter++;
            }
        }
        if (hintCounter == 5) {
            document.getElementById("hint").innerHTML = "&nbsp;Success!&nbsp;";
            document.getElementById("hint").style.background = "#00FF00"; // green
            document.getElementById("hint").style.color = "#000000"; // black
        } else {
            document.getElementById("hint").innerHTML = "&nbsp;";
            document.getElementById("hint").style.background = "#F0FFF0"; // pale green
        }
    }
}

</script>

</body>
</html>
